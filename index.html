<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ev BÃ¼tÃ§e Ultra PRO: Finansal Zeka</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee; --success: #4cc9f0; --danger: #f72585; 
            --warning: #ff9f1c; --bg: #0b0f1a; --card: #161c2d;
            --border: #2d334a; --text: #f8fafc; --text-dim: #94a3b8;
        }
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: var(--text); margin: 0; padding: 20px; font-size: 14px; }
        .container { max-width: 1400px; margin: 0 auto; }
        
        /* Layout */
        .grid { display: grid; grid-template-columns: 320px 1fr 320px; gap: 20px; }
        @media (max-width: 1200px) { .grid { grid-template-columns: 1fr 1fr; } }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }

        /* Card Styles */
        .card { background: var(--card); border-radius: 20px; border: 1px solid var(--border); padding: 20px; margin-bottom: 20px; position: relative; overflow: hidden; }
        .card h3 { margin: 0 0 15px 0; font-size: 13px; font-weight: 700; text-transform: uppercase; color: var(--success); letter-spacing: 1px; display: flex; align-items: center; gap: 8px; }

        /* Dashboard Stats */
        .net-worth { font-size: 32px; font-weight: 800; color: #fff; margin: 10px 0; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-box { background: rgba(255,255,255,0.03); padding: 15px; border-radius: 12px; }
        .stat-label { font-size: 11px; color: var(--text-dim); display: block; }
        .stat-val { font-size: 16px; font-weight: 700; margin-top: 5px; display: block; }

        /* Forms */
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 11px; color: var(--text-dim); margin-bottom: 5px; }
        input, select { width: 100%; padding: 12px; background: #0b0f1a; border: 1px solid var(--border); border-radius: 10px; color: #fff; outline: none; }
        input:focus { border-color: var(--primary); }
        button { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; background: var(--primary); color: white; transition: 0.3s; }
        button:hover { opacity: 0.8; transform: translateY(-2px); }
        .btn-outline { background: transparent; border: 1px solid var(--border); margin-top: 10px; }

        /* List Items */
        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px dotted var(--border); }
        .list-item:last-child { border: none; }
        .item-main { display: flex; flex-direction: column; }
        .item-title { font-weight: 600; font-size: 13px; }
        .item-sub { font-size: 11px; color: var(--text-dim); }
        .val-inc { color: var(--success); }
        .val-exp { color: var(--danger); }

        /* AI & Health Bar */
        .health-circle { width: 80px; height: 80px; border-radius: 50%; border: 5px solid var(--success); display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 800; margin: 0 auto 15px; }
        .ai-box { background: linear-gradient(45deg, #1e293b, #0b0f1a); border-left: 4px solid var(--primary); padding: 15px; font-style: italic; font-size: 13px; color: #cbd5e1; }

        /* Progress Bar */
        .progress-w { background: #0b0f1a; height: 6px; border-radius: 10px; margin-top: 8px; }
        .progress-f { height: 100%; background: var(--success); border-radius: 10px; width: 0%; }

        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }
    </style>
</head>
<body>

<div class="container">
    <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
        <div>
            <h1 style="margin:0; font-size: 22px; letter-spacing: -1px;">ULTRA <span style="color:var(--primary)">FINANS PRO</span></h1>
            <span id="currentDate" style="color:var(--text-dim); font-size: 12px;"></span>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-outline" onclick="exportJSON()" style="padding: 8px 15px; width: auto; font-size: 12px;">YEDEKLE</button>
            <button class="btn-outline" onclick="importJSON()" style="padding: 8px 15px; width: auto; font-size: 12px;">YÃœKLE</button>
        </div>
    </header>

    <div class="grid">
        
        <div class="col">
            <div class="card">
                <h3>ðŸ¤– AI DANIÅžMAN</h3>
                <div id="aiAdvice" class="ai-box">Analiz iÃ§in veri giriÅŸi yapÄ±n...</div>
            </div>

            <div class="card">
                <h3>ðŸ©º FINANSAL SAÄžLIK</h3>
                <div class="health-circle" id="healthScore">0</div>
                <div id="healthStatus" style="text-align: center; font-weight: 600; font-size: 12px;">Analiz Bekleniyor</div>
            </div>

            <div class="card">
                <h3>ðŸš€ NET VARLIK (NET WORTH)</h3>
                <div class="net-worth" id="netWorthDisplay">0 â‚º</div>
                <div class="stat-grid">
                    <div class="stat-box"><span class="stat-label">VarlÄ±klar</span><span id="totalAssets" class="stat-val val-inc">0</span></div>
                    <div class="stat-box"><span class="stat-label">BorÃ§lar</span><span id="totalLiabilities" class="stat-val val-exp">0</span></div>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ’Ž YATIRIM PORTFÃ–YÃœ</h3>
                <div class="input-group">
                    <input type="text" id="invName" placeholder="VarlÄ±k (Ã–rn: AltÄ±n, THY)">
                    <input type="number" id="invVal" placeholder="AnlÄ±k DeÄŸer (â‚º)" style="margin-top:5px">
                    <button onclick="addInvestment()" style="margin-top:10px; background:var(--success)">EKLE</button>
                </div>
                <div id="investmentList"></div>
            </div>
        </div>

        <div class="col">
            <div class="card">
                <h3>ðŸ’³ Ä°ÅžLEM MERKEZÄ°</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                    <input type="number" id="amount" placeholder="Tutar">
                    <select id="type">
                        <option value="expense">Gider</option>
                        <option value="income">Gelir</option>
                    </select>
                    <input type="text" id="category" placeholder="Kategori" list="catList">
                </div>
                <input type="text" id="note" placeholder="Not ekle..." style="margin-top:10px">
                <input type="date" id="date" style="margin-top:10px">
                <button onclick="addTransaction()" style="margin-top:15px">Ä°ÅžLEMÄ° KAYDET</button>
            </div>

            <div class="card">
                <h3>ðŸ“ˆ HARCAMA TRENDÄ°</h3>
                <canvas id="mainChart" style="max-height: 250px;"></canvas>
            </div>

            <div class="card">
                <h3>ðŸ“œ Ä°ÅžLEM GEÃ‡MÄ°ÅžÄ°</h3>
                <input type="text" id="search" placeholder="Ä°ÅŸlemlerde ara..." oninput="render()" style="margin-bottom:15px">
                <div id="historyList"></div>
            </div>
        </div>

        <div class="col">
            <div class="card">
                <h3>ðŸ“‰ BORÃ‡ TAKÄ°BÄ°</h3>
                <input type="text" id="debtName" placeholder="BorÃ§ AdÄ±">
                <input type="number" id="debtAmt" placeholder="Toplam Tutar">
                <button onclick="addDebt()" style="background:var(--danger); margin-top:10px">BORÃ‡ EKLE</button>
                <div id="debtList" style="margin-top:15px"></div>
            </div>

            <div class="card">
                <h3>ðŸŽ¯ TASARRUF HEDEFLERÄ°</h3>
                <input type="text" id="goalName" placeholder="Hedef (Ã–rn: Araba)">
                <input type="number" id="goalAmt" placeholder="Hedef Tutar">
                <button onclick="addGoal()" style="background:var(--warning); margin-top:10px">HEDEF KOY</button>
                <div id="goalList" style="margin-top:15px"></div>
            </div>

            <div class="card">
                <h3>ðŸ”„ AKTÄ°F ABONELÄ°KLER</h3>
                <div class="input-group">
                    <input type="text" id="subName" placeholder="Netflix, Spotify...">
                    <input type="number" id="subPrice" placeholder="AylÄ±k Ãœcret" style="margin-top:5px">
                    <button onclick="addSub()" class="btn-outline">ABONELÄ°K EKLE</button>
                </div>
                <div id="subList"></div>
            </div>
        </div>

    </div>
</div>

<datalist id="catList">
    <option value="Market"> <option value="Kira"> <option value="MaaÅŸ"> <option value="EÄŸlence"> <option value="Fatura">
</datalist>

<script>
    let db = JSON.parse(localStorage.getItem("ultra_pro_v1")) || {
        transactions: [],
        investments: [],
        debts: [],
        goals: [],
        subs: []
    };

    let chart;

    function save() { localStorage.setItem("ultra_pro_v1", JSON.stringify(db)); }

    function addTransaction() {
        const amt = Number(document.getElementById('amount').value);
        const cat = document.getElementById('category').value;
        const type = document.getElementById('type').value;
        const date = document.getElementById('date').value;
        const note = document.getElementById('note').value;

        if(!amt || !cat || !date) return alert("Eksik alan!");

        db.transactions.unshift({ id: Date.now(), amt, cat, type, date, note });
        save(); render();
        document.getElementById('amount').value = ""; document.getElementById('category').value = "";
    }

    function addInvestment() {
        const name = document.getElementById('invName').value;
        const val = Number(document.getElementById('invVal').value);
        if(name && val) { db.investments.push({ id: Date.now(), name, val }); save(); render(); }
    }

    function addDebt() {
        const name = document.getElementById('debtName').value;
        const amt = Number(document.getElementById('debtAmt').value);
        if(name && amt) { db.debts.push({ id: Date.now(), name, amt, paid: 0 }); save(); render(); }
    }

    function addGoal() {
        const name = document.getElementById('goalName').value;
        const amt = Number(document.getElementById('goalAmt').value);
        if(name && amt) { db.goals.push({ id: Date.now(), name, amt, current: 0 }); save(); render(); }
    }

    function addSub() {
        const name = document.getElementById('subName').value;
        const price = Number(document.getElementById('subPrice').value);
        if(name && price) { db.subs.push({ id: Date.now(), name, price }); save(); render(); }
    }

    function deleteItem(list, id) {
        db[list] = db[list].filter(item => item.id !== id);
        save(); render();
    }

    function render() {
        const search = document.getElementById('search').value.toLowerCase();
        let income = 0, expense = 0, invTotal = 0, debtTotal = 0;
        
        // Render Transactions
        const hist = document.getElementById('historyList'); hist.innerHTML = "";
        db.transactions.forEach(t => {
            if(t.type === 'income') income += t.amt; else expense += t.amt;
            if(t.cat.toLowerCase().includes(search) || t.note.toLowerCase().includes(search)) {
                hist.innerHTML += `
                <div class="list-item">
                    <div class="item-main"><span class="item-title">${t.cat}</span><small class="item-sub">${t.date} ${t.note ? 'â€¢ '+t.note : ''}</small></div>
                    <div style="display:flex; align-items:center gap:10px">
                        <span class="val-${t.type==='income'?'inc':'exp'}">${t.type==='income'?'+':'-'}${t.amt.toLocaleString()} â‚º</span>
                        <span onclick="deleteItem('transactions', ${t.id})" style="cursor:pointer; margin-left:10px; color:var(--text-dim)">Ã—</span>
                    </div>
                </div>`;
            }
        });

        // Render Investments
        const invList = document.getElementById('investmentList'); invList.innerHTML = "";
        db.investments.forEach(i => {
            invTotal += i.val;
            invList.innerHTML += `
                <div class="list-item">
                    <span class="item-title">${i.name}</span>
                    <span class="val-inc">${i.val.toLocaleString()} â‚º</span>
                </div>`;
        });

        // Render Debts
        const dList = document.getElementById('debtList'); dList.innerHTML = "";
        db.debts.forEach(d => {
            debtTotal += d.amt;
            dList.innerHTML += `
                <div style="margin-bottom:10px">
                    <div class="list-item"><span>${d.name}</span><b>${d.amt.toLocaleString()} â‚º</b></div>
                    <div class="progress-w"><div class="progress-f" style="width:0%; background:var(--danger)"></div></div>
                </div>`;
        });

        // Render Goals
        const gList = document.getElementById('goalList'); gList.innerHTML = "";
        db.goals.forEach(g => {
            const perc = Math.min(((income-expense)/g.amt)*100, 100);
            gList.innerHTML += `
                <div style="margin-bottom:15px">
                    <div class="list-item"><span>${g.name}</span><span>${g.amt.toLocaleString()} â‚º</span></div>
                    <div class="progress-w"><div class="progress-f" style="width:${perc}%"></div></div>
                </div>`;
        });

        // Render Subs
        const sList = document.getElementById('subList'); sList.innerHTML = "";
        db.subs.forEach(s => {
            sList.innerHTML += `<div class="list-item"><small>${s.name}</small><small>${s.price} â‚º/ay</small></div>`;
        });

        // Dashboard Stats
        const net = (income + invTotal) - (expense + debtTotal);
        document.getElementById('netWorthDisplay').textContent = net.toLocaleString() + " â‚º";
        document.getElementById('totalAssets').textContent = (income + invTotal).toLocaleString();
        document.getElementById('totalLiabilities').textContent = (expense + debtTotal).toLocaleString();

        updateHealth(income, expense, debtTotal);
        updateChart();
        runAI(income, expense, invTotal, debtTotal);
    }

    function updateHealth(inc, exp, debt) {
        let score = 50;
        if(inc > exp) score += 20;
        if(debt === 0) score += 20;
        if(inc > exp * 2) score += 10;
        if(exp > inc) score -= 30;
        
        score = Math.max(0, Math.min(100, score));
        const circle = document.getElementById('healthScore');
        circle.textContent = score;
        circle.style.borderColor = score > 70 ? 'var(--success)' : (score > 40 ? 'var(--warning)' : 'var(--danger)');
        document.getElementById('healthStatus').textContent = score > 70 ? "FÄ°NANSAL GÃœÃ‡LÃœ" : (score > 40 ? "DÄ°KKATLÄ° OLUN" : "KRÄ°TÄ°K DURUM");
    }

    function runAI(inc, exp, inv, debt) {
        const advice = document.getElementById('aiAdvice');
        let msg = "Analiz: ";
        if(db.subs.length > 3) msg += "Ã‡ok fazla aboneliÄŸin var, birini iptal etmeyi dÃ¼ÅŸÃ¼n. ";
        if(inv < inc * 0.1) msg += "VarlÄ±klarÄ±nÄ±n sadece kÃ¼Ã§Ã¼k bir kÄ±smÄ± yatÄ±rÄ±mda. ";
        if(exp > inc) msg += "AÃ§Ä±k veriyorsun! BorÃ§lanma riskin var. ";
        if(inc > exp && debt > 0) msg += "Kasadaki fazlayÄ± borÃ§ kapatmak iÃ§in kullan.";
        advice.innerHTML = msg;
    }

    function updateChart() {
        const ctx = document.getElementById('mainChart').getContext('2d');
        const data = {};
        db.transactions.filter(t => t.type==='expense').slice(0,10).forEach(t => {
            data[t.cat] = (data[t.cat] || 0) + t.amt;
        });

        if(chart) chart.destroy();
        chart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    data: Object.values(data),
                    backgroundColor: ['#4361ee', '#4cc9f0', '#f72585', '#ff9f1c', '#3f37c9'],
                    borderWidth: 0
                }]
            },
            options: { plugins: { legend: { position: 'bottom', labels: { color: '#94a3b8' } } } }
        });
    }

    function exportJSON() {
        const blob = new Blob([JSON.stringify(db)], {type: "application/json"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "Finans_Pro_Yedek.json";
        a.click();
    }

    function importJSON() {
        const input = document.createElement('input');
        input.type = 'file';
        input.onchange = e => {
            const reader = new FileReader();
            reader.onload = () => { db = JSON.parse(reader.result); save(); render(); };
            reader.readAsText(e.target.files[0]);
        };
        input.click();
    }

    document.getElementById('date').valueAsDate = new Date();
    document.getElementById('currentDate').textContent = new Date().toLocaleDateString('tr-TR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    render();
</script>

</body>
    </html>
    
